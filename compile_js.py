import execjs


# 执行JS代码获取cookie

def get_cookie(data):
    # data = str(data).replace("'",'"')
    # print(data)
    with open(r'node_modules\tr46\17track_js.js') as f:
    # with open(r'17track_js.js') as f:
        f = f.read()

    # cookie = execjs.compile(f, cwd=r'D:\nodejs\node_global\node_modules')
    cookie = execjs.compile(f, cwd='node_modules')
    cookie = cookie.call('get_cookie', data)
    return cookie


if __name__ == '__main__':
    # data = "{'data': [{'num': '1085471262', 'fc': '100001', 'sc': 0}, {'num': '2891466583', 'fc': '100001', 'sc': 0}, {'num': '7727811066', 'fc': '100001', 'sc': 0}, {'num': '2891481821', 'fc': '100001', 'sc': 0}, {'num': '7832731185', 'fc': '100001', 'sc': 0}, {'num': '8459798885', 'fc': '100001', 'sc': 0}, {'num': '1738623961', 'fc': '100001', 'sc': 0}, {'num': '1973663285', 'fc': '100001', 'sc': 0}, {'num': '4536615985', 'fc': '100001', 'sc': 0}, {'num': '1819068775', 'fc': '100001', 'sc': 0}, {'num': '1819068985', 'fc': '100001', 'sc': 0}, {'num': '1819099612', 'fc': '100001', 'sc': 0}, {'num': '1819109983', 'fc': '100001', 'sc': 0}, {'num': '1819126212', 'fc': '100001', 'sc': 0}, {'num': '1819154750', 'fc': '100001', 'sc': 0}, {'num': '1819155310', 'fc': '100001', 'sc': 0}, {'num': '1819180613', 'fc': '100001', 'sc': 0}, {'num': '1819205290', 'fc': '100001', 'sc': 0}, {'num': '1819208064', 'fc': '100001', 'sc': 0}, {'num': '1819209965', 'fc': '100001', 'sc': 0}, {'num': '1819210735', 'fc': '100001', 'sc': 0}, {'num': '1819211494', 'fc': '100001', 'sc': 0}, {'num': '1819211505', 'fc': '100001', 'sc': 0}, {'num': '1819214202', 'fc': '100001', 'sc': 0}, {'num': '1819216836', 'fc': '100001', 'sc': 0}, {'num': '1819217131', 'fc': '100001', 'sc': 0}, {'num': '1819218214', 'fc': '100001', 'sc': 0}, {'num': '1819218424', 'fc': '100001', 'sc': 0}, {'num': '1819218634', 'fc': '100001', 'sc': 0}, {'num': '1819220266', 'fc': '100001', 'sc': 0}, {'num': '1819222672', 'fc': '100001', 'sc': 0}, {'num': '1819222683', 'fc': '100001', 'sc': 0}, {'num': '1819223571', 'fc': '100001', 'sc': 0}, {'num': '1819226275', 'fc': '100001', 'sc': 0}, {'num': '1819227900', 'fc': '100001', 'sc': 0}, {'num': '1819228423', 'fc': '100001', 'sc': 0}, {'num': '1819229344', 'fc': '100001', 'sc': 0}, {'num': '1819233614', 'fc': '100001', 'sc': 0}, {'num': '1819238455', 'fc': '100001', 'sc': 0}, {'num': '5950159040', 'fc': '100001', 'sc': 0}], 'guid': '', 'timeZoneOffset': -480}"
    # data = '{"data":[{"num":"4711719386","fc":"100001","sc":0}],"guid":"","timeZoneOffset":-480}'
    data = '{"data":[{"num":"1085471262","fc":"100001","sc":0},{"num":"2891466583","fc":"100001","sc":0},{"num":"7727811066","fc":"100001","sc":0},{"num":"2891481821","fc":"100001","sc":0},{"num":"7832731185","fc":"100001","sc":0},{"num":"8459798885","fc":"100001","sc":0},{"num":"1738623961","fc":"100001","sc":0},{"num":"1973663285","fc":"100001","sc":0},{"num":"4536615985","fc":"100001","sc":0},{"num":"1819068775","fc":"100001","sc":0},{"num":"1819068985","fc":"100001","sc":0},{"num":"1819099612","fc":"100001","sc":0},{"num":"1819109983","fc":"100001","sc":0},{"num":"1819126212","fc":"100001","sc":0},{"num":"1819154750","fc":"100001","sc":0},{"num":"1819155310","fc":"100001","sc":0},{"num":"1819180613","fc":"100001","sc":0},{"num":"1819205290","fc":"100001","sc":0},{"num":"1819208064","fc":"100001","sc":0},{"num":"1819209965","fc":"100001","sc":0},{"num":"1819210735","fc":"100001","sc":0},{"num":"1819211494","fc":"100001","sc":0},{"num":"1819211505","fc":"100001","sc":0},{"num":"1819214202","fc":"100001","sc":0},{"num":"1819216836","fc":"100001","sc":0},{"num":"1819217131","fc":"100001","sc":0},{"num":"1819218214","fc":"100001","sc":0},{"num":"1819218424","fc":"100001","sc":0},{"num":"1819218634","fc":"100001","sc":0},{"num":"1819220266","fc":"100001","sc":0},{"num":"1819222672","fc":"100001","sc":0},{"num":"1819222683","fc":"100001","sc":0},{"num":"1819223571","fc":"100001","sc":0},{"num":"1819226275","fc":"100001","sc":0},{"num":"1819227900","fc":"100001","sc":0},{"num":"1819228423","fc":"100001","sc":0},{"num":"1819229344","fc":"100001","sc":0},{"num":"1819233614","fc":"100001","sc":0},{"num":"1819238455","fc":"100001","sc":0},{"num":"5950159040","fc":"100001","sc":0}],"guid":"","timeZoneOffset":-480}'
    data = str(data).replace("'", '"')
    print(execjs.get().name)
    cookie = get_cookie(data)
    print(cookie)
